
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Occasional lies &#8212; Friendly tracebacks 0.0.17 documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Some thoughts on the design of friendly-traceback" href="design.html" />
    <link rel="prev" title="Usage" href="usage.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="design.html" title="Some thoughts on the design of friendly-traceback"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="usage.html" title="Usage"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Friendly tracebacks 0.0.17 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Occasional lies</a><ul>
<li><a class="reference internal" href="#you-can-lie-too">You can lie too</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="usage.html"
                        title="previous chapter">Usage</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="design.html"
                        title="next chapter">Some thoughts on the design of friendly-traceback</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/lies.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="occasional-lies">
<h1>Occasional lies<a class="headerlink" href="#occasional-lies" title="Permalink to this headline">¶</a></h1>
<p>Let’s get something immediately out of the way:
[very occasionally] Friendly-traceback will lie to you.
When it does so, it will indicate it to you;
however, it will do so in a way that might be easily overlooked.</p>
<p>Have a look at the following screen captures, all taken using
version 0.0.8a  (Python version: 3.7.3 on Win 32). (Later screenshots
will normally include Friendly-traceback version.)</p>
<p>First, we show a traceback generated with <code class="docutils literal notranslate"><span class="pre">level</span></code> set to 0:
with this choice, the output only includes the normal
Python traceback.</p>
<a class="reference internal image-reference" href="_images/name_error_0.png"><img alt="Friendly Python traceback" src="_images/name_error_0.png" style="width: 598.1999999999999px; height: 106.2px;" /></a>
<p>Next, we show a traceback generated with <code class="docutils literal notranslate"><span class="pre">level</span></code> set to 9:
this corresponds to the “simulated” Python traceback as
determined by Friendly-traceback.  The traceback is
identical to the true Python traceback as above.</p>
<a class="reference internal image-reference" href="_images/name_error_9.png"><img alt="Friendly Python traceback" src="_images/name_error_9.png" style="width: 592.8px; height: 108.6px;" /></a>
<p>So far, Friendly-traceback has not lied. Let’s look at another
example, first run directly with Python.</p>
<a class="reference internal image-reference" href="_images/syntax_error1_py.png"><img alt="Friendly Python traceback" src="_images/syntax_error1_py.png" style="width: 598.1999999999999px; height: 111.6px;" /></a>
<p>Because the traceback contains only a single step, Python did not
include the standard header <code class="docutils literal notranslate"><span class="pre">Traceback</span> <span class="pre">(most</span> <span class="pre">recent</span> <span class="pre">call</span> <span class="pre">last):</span></code>.</p>
<p>Here’s the “simulated” Python traceback generated by Friendly-traceback.</p>
<a class="reference internal image-reference" href="_images/syntax_error1_9.png"><img alt="Friendly Python traceback" src="_images/syntax_error1_9.png" style="width: 601.8px; height: 126.6px;" /></a>
<p>Notice how the standard header appears, but preceeded by the word
“Simulated”.</p>
<p>Here’s the <strong>true</strong> Python traceback generated (displayed with <code class="docutils literal notranslate"><span class="pre">level</span></code> 0)
while this same script is run by Friendly-traceback:</p>
<a class="reference internal image-reference" href="_images/syntax_error1_0.png"><img alt="Friendly Python traceback" src="_images/syntax_error1_0.png" style="width: 854.0px; height: 336.0px;" /></a>
<p>This traceback contains a lot more information, as Friendly-traceback
uses Python’s <code class="docutils literal notranslate"><span class="pre">runpy</span></code> module as well as its own functions to run this
script - all of which are shown in this traceback.
To avoid confusing users, when it is desired to include a Python traceback
in the information provided by Friendly-traceback, the default will
be to include a “simulated” traceback, where all traces of
Friendly-traceback’s own functions, as well as Python’s <code class="docutils literal notranslate"><span class="pre">runpy</span></code> module,
will be removed.  When such calls are removed, the traceback header
will have the word “Simulated” inserted first.  If no calls are removed,
like in the very first example, then the word “Simulated” does not appear.</p>
<div class="section" id="you-can-lie-too">
<h2>You can lie too<a class="headerlink" href="#you-can-lie-too" title="Permalink to this headline">¶</a></h2>
<p>Sometimes, you might wish to exclude other modules from the
simulated Python traceback. For example, in Friendly-traceback’s console,
the Python <code class="docutils literal notranslate"><span class="pre">codeop.py</span></code> module might sometimes appear due to the
way we process the users’ code. To instruct Friendly-traceback
from including this module in the “simulated” traceback,
we need to have the following two lines of code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">codeop</span>
<span class="n">friendly_traceback</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">add_excluded_path</span><span class="p">(</span><span class="n">codeop</span><span class="o">.</span><span class="vm">__file__</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="design.html" title="Some thoughts on the design of friendly-traceback"
             >next</a> |</li>
        <li class="right" >
          <a href="usage.html" title="Usage"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Friendly tracebacks 0.0.17 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, André Roberge.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.2.
    </div>
  </body>
</html>