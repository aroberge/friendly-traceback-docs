
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Usage &#8212; Friendly tracebacks 0.0.18a documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Occasional lies" href="lies.html" />
    <link rel="prev" title="Bienvenue 환영합니다 Bienvenido - ようこそ Welcome 歡迎光臨" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="lies.html" title="Occasional lies"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Bienvenue 환영합니다 Bienvenido - ようこそ Welcome 歡迎光臨"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Friendly tracebacks 0.0.18a documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Usage</a><ul>
<li><a class="reference internal" href="#where-the-output-is-written">Where the output is written?</a></li>
<li><a class="reference internal" href="#how-much-information-is-printed">How much information is printed?</a></li>
<li><a class="reference internal" href="#language-used">Language used</a></li>
<li><a class="reference internal" href="#as-an-exception-hook">As an exception hook</a></li>
<li><a class="reference internal" href="#catching-exception-locally">Catching exception locally</a></li>
<li><a class="reference internal" href="#from-the-command-line">From the command line</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Bienvenue 환영합니다 Bienvenido - ようこそ Welcome  歡迎光臨</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="lies.html"
                        title="next chapter">Occasional lies</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/usage.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<p>There are various ways of using friendly-traceback.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In some of the examples below, we use the program <code class="docutils literal notranslate"><span class="pre">hello.py</span></code> found
in the <code class="docutils literal notranslate"><span class="pre">demos</span></code> directory, containing the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Hello world!&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running as main!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<ol class="arabic">
<li><p>As an exception hook:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">friendly_traceback</span>
<span class="n">friendly_traceback</span><span class="o">.</span><span class="n">install</span><span class="p">()</span>  <span class="c1"># sys.excepthook = friendly_traceback.explain</span>
</pre></div>
</div>
</li>
<li><p>Catching exceptions locally:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">friendly_traceback</span>

<span class="o">...</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1"># Some code</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="n">friendly_traceback</span><span class="o">.</span><span class="n">explain</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>When launching a Python script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python -m friendly_traceback demos/hello.py

Hello world!
Running as main!
</pre></div>
</div>
</li>
<li><p>Launching the friendly console after running a script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python -im friendly_traceback demos.hello

Hello world!
Running as main!
Friendly Console version 0.0.10a. [Python version: 3.7.3]

&gt;&gt;&gt;
</pre></div>
</div>
</li>
<li><p>Only importing a Python script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python -m friendly_traceback --import_only demos.hello

Hello world!
</pre></div>
</div>
</li>
<li><p>Importing a script and starting the console:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python -im friendly_traceback --import_only demos.hello

Hello world!
Friendly Console version 0.0.10a. [Python version: 3.7.3]

&gt;&gt;&gt;
</pre></div>
</div>
</li>
<li><p>Only starting the console:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python -m friendly_traceback
</pre></div>
</div>
</li>
<li><p>Starting the console from an interpreter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">friendly_traceback</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">friendly_traceback</span><span class="o">.</span><span class="n">start_console</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>To see if there are syntax errors, with attempts to provide an
explanation as to what they mean, in a file specified by
its path (assumed to be relative to the current working directory):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">friendly_traceback</span>
<span class="n">friendly_traceback</span><span class="o">.</span><span class="n">check_syntax</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;demos/hello.py&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>To see if there are syntax errors in some code submitted as
a string, with an optional file name supplied:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">friendly_traceback</span>
<span class="n">friendly_traceback</span><span class="o">.</span><span class="n">check_syntax</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">some_code</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;hello.py&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Instead of simply checking the syntax, one can run the code to see
if there are also runtime errors; this is done by calling <code class="docutils literal notranslate"><span class="pre">run_code</span></code>
which first calls <code class="docutils literal notranslate"><span class="pre">check_syntax</span></code> and will execute the code if
no exception are raised; for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">friendly_traceback</span>
<span class="n">friendly_traceback</span><span class="o">.</span><span class="n">run_code</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">some_code</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;hello.py&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
<p>You can also specify the verbosity level as well as the language
to be used, either as command line arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python -m friendly_traceback --lang fr --level 5
</pre></div>
</div>
<p>or as optional arguments when using <code class="docutils literal notranslate"><span class="pre">check_syntax</span></code> or <code class="docutils literal notranslate"><span class="pre">run_code</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">friendly_traceback</span><span class="o">.</span><span class="n">check_syntax</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;fr&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="where-the-output-is-written">
<h2>Where the output is written?<a class="headerlink" href="#where-the-output-is-written" title="Permalink to this headline">¶</a></h2>
<p>By default, friendly tracebacks are written to <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>.
However, it is possible to override this choice, as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">friendly_traceback</span><span class="o">.</span><span class="n">set_stream</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
</pre></div>
</div>
<p>Thus, the default amounts to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">friendly_traceback</span><span class="o">.</span><span class="n">set_stream</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</pre></div>
</div>
<p>A special option exists to capture the output as a string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">friendly_traceback</span><span class="o">.</span><span class="n">set_stream</span><span class="p">(</span><span class="s2">&quot;capture&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Later, this captured output can be retrieved using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">output</span> <span class="o">=</span> <span class="n">friendly_traceback</span><span class="o">.</span><span class="n">get_output</span><span class="p">()</span>

<span class="c1"># equivalent to</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">friendly_traceback</span><span class="o">.</span><span class="n">get_output</span><span class="p">(</span><span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>The value shown for the <code class="docutils literal notranslate"><span class="pre">flush</span></code> parameter is the default; this means that
the output will be cleared once it has been retrieved. If this is not the
desired behaviour, simply use <code class="docutils literal notranslate"><span class="pre">flush=False</span></code>.</p>
</div>
<div class="section" id="how-much-information-is-printed">
<h2>How much information is printed?<a class="headerlink" href="#how-much-information-is-printed" title="Permalink to this headline">¶</a></h2>
<p>The amount of information shown to the user can be changed using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">friendly_traceback</span><span class="o">.</span><span class="n">set_level</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
</pre></div>
</div>
<p>What each level correspond to is shown later in this documentation.
The level currently used can be obtained as follows:</p>
<blockquote>
<div><p>level = friendly_traceback.get_level()</p>
</div></blockquote>
</div>
<div class="section" id="language-used">
<h2>Language used<a class="headerlink" href="#language-used" title="Permalink to this headline">¶</a></h2>
<p>The language used can be explicitly set as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">friendly_traceback</span><span class="o">.</span><span class="n">set_lang</span><span class="p">(</span><span class="s2">&quot;fr&quot;</span><span class="p">)</span>  <span class="c1"># two-letter code for French</span>
</pre></div>
</div>
<p>The language currently used can be obtained using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lang</span> <span class="o">=</span> <span class="n">friendly_traceback</span><span class="o">.</span><span class="n">get_lang</span><span class="p">()</span>
</pre></div>
</div>
<p>If the language requested does not exist, no error is raised nor any warning
given, but the choice reverts to the default (English).
More information on the choice of language (localization) can be found
in the section about design.</p>
</div>
<div class="section" id="as-an-exception-hook">
<h2>As an exception hook<a class="headerlink" href="#as-an-exception-hook" title="Permalink to this headline">¶</a></h2>
<p>When “installing” friendly-traceback, one can use various optional
parameters:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">friendly_traceback</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="n">lang</span><span class="o">=</span><span class="s2">&quot;fr&quot;</span><span class="p">,</span> <span class="n">redirect</span><span class="o">=</span><span class="s2">&quot;capture&quot;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>This is equivalent to writing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">friendly_traceback</span><span class="o">.</span><span class="n">install</span><span class="p">()</span>
<span class="n">friendly_traceback</span><span class="o">.</span><span class="n">set_lang</span><span class="p">(</span><span class="s2">&quot;fr&quot;</span><span class="p">)</span>
<span class="n">friendly_traceback</span><span class="o">.</span><span class="n">set_stream</span><span class="p">(</span><span class="s2">&quot;capture&quot;</span><span class="p">)</span>
<span class="n">friendly_traceback</span><span class="o">.</span><span class="n">set_level</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="catching-exception-locally">
<h2>Catching exception locally<a class="headerlink" href="#catching-exception-locally" title="Permalink to this headline">¶</a></h2>
<p>As mentioned before, another way to use Friendly-traceback is to catch
exceptions where they are expected to arise, such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="c1"># Some code</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="n">friendly_traceback</span><span class="o">.</span><span class="n">explain</span><span class="p">()</span>
</pre></div>
</div>
<p>This uses the default of writing to <code class="docutils literal notranslate"><span class="pre">sys.stderr</span></code>.
One can also <strong>temporarily</strong> redirect the output to any stream:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="c1"># Some code</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="n">friendly_traceback</span><span class="o">.</span><span class="n">explain</span><span class="p">(</span><span class="n">redirect</span><span class="o">=</span><span class="n">stream</span><span class="p">)</span>
</pre></div>
</div>
<p>By default, friendly-traceback takes its information from <code class="docutils literal notranslate"><span class="pre">sys.exc_info()</span></code>.
It may happen that this is not what we want to show.
For example, the <code class="docutils literal notranslate"><span class="pre">showtraceback</span> <span class="pre">method</span> <span class="pre">in</span> <span class="pre">Python's</span> <span class="pre">code.py</span> <span class="pre">&lt;https://github.com/python/cpython/blob/3.7/Lib/code.py#L131&gt;`_</span> <span class="pre">replaces</span> <span class="pre">one</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">items</span> <span class="pre">prior</span> <span class="pre">to</span>
<span class="pre">showing</span> <span class="pre">the</span> <span class="pre">traceback</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">user;</span> <span class="pre">we</span> <span class="pre">currently</span> <span class="pre">also</span> <span class="pre">do</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">in</span>
<span class="pre">friendly-traceback's</span> <span class="pre">own</span> <span class="pre">console.</span>&#160; <span class="pre">If</span> <span class="pre">this</span> <span class="pre">is</span> <span class="pre">something</span> <span class="pre">desired,</span>
<span class="pre">instead</span> <span class="pre">of</span> <span class="pre">``explain()</span></code>, one can use the “private” function
<code class="docutils literal notranslate"><span class="pre">_explain()</span></code> instead.  Ignoring optional parameters,
what we currently have is essentially the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">explain</span><span class="p">():</span>
    <span class="n">etype</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">tb</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
    <span class="n">_explain</span><span class="p">(</span><span class="n">etype</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">tb</span><span class="p">)</span>
</pre></div>
</div>
<p>If one wishes to temporarily change some other option mentioned above,
it can be done as in the following example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="c1"># Some code</span>
<span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
    <span class="n">lang</span> <span class="o">=</span> <span class="n">friendly_traceback</span><span class="o">.</span><span class="n">get_lang</span><span class="p">()</span>
    <span class="n">friendly_traceback</span><span class="o">.</span><span class="n">set_lang</span><span class="p">(</span><span class="s2">&quot;fr&quot;</span><span class="p">)</span>
    <span class="n">friendly_traceback</span><span class="o">.</span><span class="n">explain</span><span class="p">()</span>
    <span class="n">friendly_traceback</span><span class="o">.</span><span class="n">set_lang</span><span class="p">(</span><span class="n">lang</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="from-the-command-line">
<h2>From the command line<a class="headerlink" href="#from-the-command-line" title="Permalink to this headline">¶</a></h2>
<p>The following is subject to change; this was copied from version 0.0.8a</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python -m friendly_traceback -h
usage: __main__.py [-h] [--lang LANG] [--level LEVEL] [--import_only]
                   [--version]
                   [source]

Friendly-traceback makes Python tracebacks easier to understand.

        Note: the values of the verbosity level described below are:
            0: Normal Python tracebacks
            1: Default - does not need to be specified
            2: Python tracebacks appear before the friendly display
            3: Python tracebacks appended at the end of the friendly display.
            4: Python traceback followed by basic explanation
            5: Only basic explanation
            6: No generic explanation
            7: Python tracebacks appear before the friendly display but
               no generic explanation is included.
            9: Python traceback

        The Python traceback for level &gt;= 1 are the simulated version.
        You can use negative values to show the true Python traceback which
        will likely include function calls from friendly-traceback itself.
        Thus level -9 is equivalent to level 0.

        Other values may be available, as we try to find the most useful
        settings for beginners.

positional arguments:
  source         Name of the script to be run as though it was the main module
                 run by Python, so that __name__ does equal &#39;__main__&#39;.

optional arguments:
  -h, --help     show this help message and exit
  --lang LANG    This sets the language used by Friendly-tracebacks. Usually
                 this is a two-letter code such as &#39;fr&#39; for French.
  --level LEVEL  This sets the &quot;verbosity&quot; level, that is the amount of
                 information provided.
  --import_only  Imports the module instead of running it as a script.
  --version      Displays the current version.
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="lies.html" title="Occasional lies"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Bienvenue 환영합니다 Bienvenido - ようこそ Welcome 歡迎光臨"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Friendly tracebacks 0.0.18a documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, André Roberge.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.2.
    </div>
  </body>
</html>