

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Custom formatter &mdash; Friendly tracebacks 0.2.31a documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Other details for advanced users" href="usage_adv.html" />
    <link rel="prev" title="Public API" href="api.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Friendly tracebacks
          

          
          </a>

          
            
            
              <div class="version">
                0.2.31a
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Begin here</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Installation and basic usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="repl.html">Console basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="editor.html">Using with an editor or IDE</a></li>
<li class="toctree-l1"><a class="reference internal" href="mu.html">Using with Mu</a></li>
<li class="toctree-l1"><a class="reference internal" href="thonny.html">Using with Thonny</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipython.html">IPython and Jupyter notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracebacks.html">Multiple tracebacks</a></li>
</ul>
<p class="caption"><span class="caption-text">Thoughts on design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="design.html">Some thoughts on the design of Friendly-traceback</a></li>
<li class="toctree-l1"><a class="reference internal" href="themes.html">Themes and colours</a></li>
</ul>
<p class="caption"><span class="caption-text">Use in your project</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="lies.html">Learn to lie</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Public API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Custom formatter</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#formatters-py">formatters.py</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage_adv.html">Other details for advanced users</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Editor plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Contribute</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="suggest.html">Suggest an addition</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_exception.html">Developer: Add a new Exception case</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntax_error.html">Developer: Add a new SyntaxError case</a></li>
<li class="toctree-l1"><a class="reference internal" href="translation_notes.html">Notes on translations - using gettext</a></li>
</ul>
<p class="caption"><span class="caption-text">All the tracebacks!</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="known.html">Generic information about various exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracebacks_en_3.6.html">Friendly tracebacks - Python 3.6 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntax_tracebacks_en_3.6.html">SyntaxError - Python 3.6 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracebacks_en_3.7.html">Friendly tracebacks - Python 3.7 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntax_tracebacks_en_3.7.html">SyntaxError - Python 3.7 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracebacks_en_3.8.html">Friendly tracebacks - Python 3.8 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntax_tracebacks_en_3.8.html">SyntaxError - Python 3.8 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracebacks_en_3.9.html">Friendly tracebacks - Python 3.9 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntax_tracebacks_en_3.9.html">SyntaxError - Python 3.9 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracebacks_en_3.10.html">Friendly tracebacks - Python 3.10 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntax_tracebacks_en_3.10.html">SyntaxError - Python 3.10 in English</a></li>
<li class="toctree-l1"><a class="reference internal" href="compare_exceptions.html">Comparing Exception messages between Python versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="compare.html">Comparison between Python versions: SyntaxErrors</a></li>
</ul>
<p class="caption"><span class="caption-text">Markdown examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tracebacks_markdown.html">Friendly tracebacks - markdown_docs format</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracebacks_syntax_markdown.html">Syntax errors - markdown_docs format</a></li>
</ul>
<p class="caption"><span class="caption-text">En français</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tracebacks_fr.html"> Friendly tracebacks - en Français</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntax_tracebacks_fr.html"> Friendly SyntaxError tracebacks - en Français</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Friendly tracebacks</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Custom formatter</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/formatter.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="usage_adv.html" class="btn btn-neutral float-right" title="Other details for advanced users" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="api.html" class="btn btn-neutral float-left" title="Public API" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="custom-formatter">
<h1>Custom formatter<a class="headerlink" href="#custom-formatter" title="Permalink to this headline">¶</a></h1>
<p>Friendly-traceback comes with various formatters which style
the information differently based on the environment.
If the builtin formatters do not meet your need, you can design
your own and set it as a default using either:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">friendly_traceback</span>
<span class="kn">from</span> <span class="nn">my_module</span> <span class="kn">import</span> <span class="n">my_formatter</span>

<span class="n">friendly_traceback</span><span class="o">.</span><span class="n">set_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="o">=</span><span class="n">my_formatter</span><span class="p">)</span>
</pre></div>
</div>
<p>or, from the command line:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python -m friendly_traceback --format path.to.my_module.my_formatter
</pre></div>
</div>
<p>Currently, a formatter must accept two arguments:</p>
<ol class="arabic">
<li><p>A dict (<code class="docutils literal notranslate"><span class="pre">info</span></code>) which contains the friendly traceback information.
The current dict items are the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">items</span> <span class="o">=</span> <span class="p">[</span>
     <span class="s2">&quot;debug_warning&quot;</span><span class="p">,</span>
     <span class="s2">&quot;header&quot;</span><span class="p">,</span>
     <span class="s2">&quot;message&quot;</span><span class="p">,</span>  <span class="c1"># The last line of a Python traceback</span>
     <span class="s2">&quot;original_python_traceback&quot;</span><span class="p">,</span>
     <span class="s2">&quot;simulated_python_traceback&quot;</span><span class="p">,</span>
     <span class="s2">&quot;shortened_traceback&quot;</span><span class="p">,</span>
     <span class="s2">&quot;suggest&quot;</span><span class="p">,</span>
     <span class="s2">&quot;generic&quot;</span><span class="p">,</span>
     <span class="s2">&quot;parsing_error&quot;</span><span class="p">,</span>
     <span class="s2">&quot;parsing_error_source&quot;</span><span class="p">,</span>
     <span class="s2">&quot;cause_header&quot;</span><span class="p">,</span>
     <span class="s2">&quot;cause&quot;</span><span class="p">,</span>
     <span class="s2">&quot;last_call_header&quot;</span><span class="p">,</span>
     <span class="s2">&quot;last_call_source&quot;</span><span class="p">,</span>
     <span class="s2">&quot;last_call_variables&quot;</span><span class="p">,</span>
     <span class="s2">&quot;exception_raised_header&quot;</span><span class="p">,</span>
     <span class="s2">&quot;exception_raised_source&quot;</span><span class="p">,</span>
     <span class="s2">&quot;exception_raised_variables&quot;</span><span class="p">,</span>
 <span class="p">]</span>
</pre></div>
</div>
<p>New items are likely going to be added in the near future:
is it suggested that you look at the actual code if you plan to
create your own formatter.</p>
</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">show_info()</span></code> in a Friendly console to see all possible items.</p>
</div>
<ol class="arabic simple" start="2">
<li><p>A string (<code class="docutils literal notranslate"><span class="pre">include</span></code>) which specifies which parts of the friendly
traceback should be shown, and whose value is currently set
using <code class="docutils literal notranslate"><span class="pre">friendly_traceback.set_include(...)</span></code>.</p></li>
</ol>
<p>The second argument _might_ change in the future. If you only plan
on making use of the traceback information compiled by Friendly-traceback
and determine what to show (and in which order) on your own, to ensure
that future version of Friendly-traceback will be compatible with
your formatter, we suggest the following definition:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_formatter</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="o">**</span><span class="n">ignore</span><span class="p">):</span>
    <span class="o">....</span>
</pre></div>
</div>
<span class="target" id="module-friendly_traceback.formatters"></span><div class="section" id="formatters-py">
<h2>formatters.py<a class="headerlink" href="#formatters-py" title="Permalink to this headline">¶</a></h2>
<p>Default formatters showing all or only part of the available information.</p>
<p>A formatter is a function that takes two arguments:</p>
<ol class="arabic simple">
<li><p>a dict (named <code class="docutils literal notranslate"><span class="pre">info</span></code> everywhere in friendly-traceback files) containing
all the information that can be shown to the user, as well as some
entries that are meant to be used only internally as the full
friendly-traceback information is obtained.</p></li>
<li><p>A second argument which is meant to convey what information should be shown.
This second argument used to be a single integer (“verbosity level”).
It is currently recently being replaced by a single string. However,
this might change as we experiment with various options prior to
version 1.0</p></li>
</ol>
<p>A formatter returns a single string. By default, this string will be
written to stderr; however this can be changed by the calling program.</p>
<p>This module currently contains 6 formatters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">repl()</span></code>: This is used to print the information in a traditional console,
including that found in IDLE.  The indentation of the traceback itself
is chosen so as to reproduce that of a normal Python traceback.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pre()</span></code>: this produces output with leading spaces so that it can be
embedded as a code-block in a file (such as .rst). It can also be used
to print the information in a traditional console, including that
found in IDLE.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jupyter()</span></code>: experimental formatter for Jupyter notebooks</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">markdown()</span></code>: This produces an output formatted with markdown syntax.</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">markdown_docs()</span></code>: This produces an output formatted markdown syntax,</dt><dd><p>but where each header is shifted down by 2 (h1 -&gt; h3, etc.) so that they
can be inserted in a document, without creating artificial top headers.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">rich_markdown()</span></code>: This produces an output formatted with markdown syntax,</dt><dd><p>with some modification, with the end result intended to be printed
in colour in a console using Rich (<a class="reference external" href="https://github.com/willmcgugan/rich">https://github.com/willmcgugan/rich</a>).</p>
</dd>
</dl>
</li>
</ul>
<dl class="py function">
<dt id="friendly_traceback.formatters.jupyter">
<code class="sig-name descname">jupyter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">info</span></em>, <em class="sig-param"><span class="n">include</span><span class="o">=</span><span class="default_value">'friendly_tb'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/friendly_traceback/formatters.html#jupyter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#friendly_traceback.formatters.jupyter" title="Permalink to this definition">¶</a></dt>
<dd><p>Default formatter, primarily for console usage.</p>
<p>The only change made to the content of “info” is
some added indentation.</p>
</dd></dl>

<dl class="py function">
<dt id="friendly_traceback.formatters.markdown">
<code class="sig-name descname">markdown</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">info</span></em>, <em class="sig-param"><span class="n">include</span><span class="o">=</span><span class="default_value">'friendly_tb'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/friendly_traceback/formatters.html#markdown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#friendly_traceback.formatters.markdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Traceback formatted with markdown syntax.</p>
<p>Some minor changes of the traceback info content are done,
for nicer final display when the markdown generated content
if further processed.</p>
</dd></dl>

<dl class="py function">
<dt id="friendly_traceback.formatters.markdown_docs">
<code class="sig-name descname">markdown_docs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">info</span></em>, <em class="sig-param"><span class="n">include</span><span class="o">=</span><span class="default_value">'explain'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/friendly_traceback/formatters.html#markdown_docs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#friendly_traceback.formatters.markdown_docs" title="Permalink to this definition">¶</a></dt>
<dd><p>Traceback formatted with markdown syntax, where each
header is shifted down by 2 (h1 -&gt; h3, etc.) so that they
can be inserted in a document, without creating artificial
top headers.</p>
<p>Some minor changes of the traceback info content are done,
for nicer final display when the markdown generated content
is further processed.</p>
</dd></dl>

<dl class="py function">
<dt id="friendly_traceback.formatters.no_result">
<code class="sig-name descname">no_result</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">info</span></em>, <em class="sig-param"><span class="n">include</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/friendly_traceback/formatters.html#no_result"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#friendly_traceback.formatters.no_result" title="Permalink to this definition">¶</a></dt>
<dd><p>Should normally only be called if no result is available
from either hint() or why().</p>
</dd></dl>

<dl class="py function">
<dt id="friendly_traceback.formatters.pre">
<code class="sig-name descname">pre</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">info</span></em>, <em class="sig-param"><span class="n">include</span><span class="o">=</span><span class="default_value">'friendly_tb'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/friendly_traceback/formatters.html#pre"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#friendly_traceback.formatters.pre" title="Permalink to this definition">¶</a></dt>
<dd><p>Formatter that produces an output that is suitable for
insertion in a RestructuredText (.rst) code block,
with pre-formatted indentation.</p>
<p>The only change made to the content of “info” is
some added indentation.</p>
</dd></dl>

<dl class="py function">
<dt id="friendly_traceback.formatters.repl">
<code class="sig-name descname">repl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">info</span></em>, <em class="sig-param"><span class="n">include</span><span class="o">=</span><span class="default_value">'friendly_tb'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/friendly_traceback/formatters.html#repl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#friendly_traceback.formatters.repl" title="Permalink to this definition">¶</a></dt>
<dd><p>Default formatter, primarily for console usage.</p>
<p>The only change made to the content of “info” is
some added indentation.</p>
</dd></dl>

<dl class="py function">
<dt id="friendly_traceback.formatters.rich_markdown">
<code class="sig-name descname">rich_markdown</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">info</span></em>, <em class="sig-param"><span class="n">include</span><span class="o">=</span><span class="default_value">'friendly_tb'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/friendly_traceback/formatters.html#rich_markdown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#friendly_traceback.formatters.rich_markdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Traceback formatted with with markdown syntax suitable for
printing in color in the console using Rich.</p>
<p>Some minor changes of the traceback info content are done,
for nicer final display when the markdown generated content
if further processed.</p>
<p>Some additional processing is done just prior to doing the
final output, by <code class="docutils literal notranslate"><span class="pre">session._write_err()</span></code>.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="usage_adv.html" class="btn btn-neutral float-right" title="Other details for advanced users" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="api.html" class="btn btn-neutral float-left" title="Public API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, André Roberge

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>